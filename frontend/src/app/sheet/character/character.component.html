<div class="character">
  <app-card>
    <h2>Character</h2>

    <div class="field">
      <label for="name">Name</label>
      <input
        id="name"
        type="text"
        placeholder="Name"
        [ngModel]="sheet.name"
        (ngModelChange)="updateField('name', $event)"
      />
    </div>

    <div class="row">
      <div class="col">
        <label>Rasse</label>
        <button class="race-button" (click)="openRaceSelector()">
          {{ sheet.race || 'Rasse w√§hlen...' }}
        </button>
      </div>
      <div class="col">
        <label for="age">Alter</label>
        <input
          id="age"
          type="text"
          placeholder="24"
          [ngModel]="sheet.age"
          (ngModelChange)="patch.emit({ path: 'age', value: $event })"
        />
      </div>
    </div>

    <div class="row">
      <div class="col">
        <label for="alignment">Gesinnung</label>
        <input
          id="alignment"
          type="text"
          placeholder="Ganz net eigentlich"
          [ngModel]="sheet.alignment"
          (ngModelChange)="patch.emit({ path: 'alignment', value: $event })"
        />
      </div>
      <div class="col">
        <label for="size">Gr√∂√üe</label>
        <input
          id="size"
          type="text"
          placeholder="1.8M"
          [ngModel]="sheet.size"
          (ngModelChange)="patch.emit({ path: 'size', value: $event })"
        />
      </div>
    </div>
    <app-portrait [sheet]="sheet" [charId]="characterId" (baseImage)="updateField('portrait', $event)"></app-portrait>
    <div class="field">
      <label for="player">Extra Info</label>
      <input
        id="player"
        type="text"
        placeholder="..."
        [ngModel]="sheet.extrainfo"
        (ngModelChange)="patch.emit({ path: 'extrainfo', value: $event })"
      />
    </div>
    @if (sheet.worldName) {
      <div class="field world-link">
        <label>Welt</label>
        <button class="world-button" (click)="openWorldLobby()" title="Lobby in neuem Tab √∂ffnen">
          üåç {{ sheet.worldName }}
        </button>
      </div>
    }
  </app-card>
</div>

@if (showRaceSelector) {
  <app-race-selector
    [sheet]="sheet"
    (patch)="onRacePatch($event)"
    (close)="closeRaceSelector()">
  </app-race-selector>
}
