<div class="race-card" [class.selected]="isSelected" (click)="onClick()" (dblclick)="onDoubleClick()">
  <div class="race-card-image">
    @if (race.baseImage) {
      <img [src]="race.baseImage | imageUrl" [alt]="race.name">
    } @else {
      <div class="placeholder-image">?</div>
    }
  </div>
  <div class="race-card-content">
    <div class="race-card-header">
      <h3 class="race-card-name">{{ race.name }}</h3>
      <span class="race-card-age">Lifespan: {{ race.ageRange }} years</span>
    </div>

    @if (race.lore) {
      <div class="race-card-lore">{{ race.lore }}</div>
    }

    <div class="race-card-resources">
      <div class="resource health">
        <span class="resource-icon">❤</span>
        <span class="resource-value">{{ race.baseHealth }}</span>
        <span class="resource-label">Health</span>
      </div>
      <div class="resource energy">
        <span class="resource-icon">⚡</span>
        <span class="resource-value">{{ race.baseEnergy }}</span>
        <span class="resource-label">Energy</span>
      </div>
      <div class="resource mana">
        <span class="resource-icon">✦</span>
        <span class="resource-value">{{ race.baseMana }}</span>
        <span class="resource-label">Mana</span>
      </div>
    </div>

    <div class="race-card-stats">
      <div class="stat">
        <span class="label">STR</span>
        <span class="value">{{ race.baseStrength }}</span>
        <span class="gain">+{{ race.strengthPerLevel }}/lvl</span>
      </div>
      <div class="stat">
        <span class="label">DEX</span>
        <span class="value">{{ race.baseDexterity }}</span>
        <span class="gain">+{{ race.dexterityPerLevel }}/lvl</span>
      </div>
      <div class="stat">
        <span class="label">SPD</span>
        <span class="value">{{ race.baseSpeed }}</span>
        <span class="gain">+{{ race.speedPerLevel }}/lvl</span>
      </div>
      <div class="stat">
        <span class="label">INT</span>
        <span class="value">{{ race.baseIntelligence }}</span>
        <span class="gain">+{{ race.intelligencePerLevel }}/lvl</span>
      </div>
      <div class="stat">
        <span class="label">CON</span>
        <span class="value">{{ race.baseConstitution }}</span>
        <span class="gain">+{{ race.constitutionPerLevel }}/lvl</span>
      </div>
      <div class="stat">
        <span class="label">CHL</span>
        <span class="value">{{ race.baseChill }}</span>
        <span class="gain">+{{ race.chillPerLevel }}/lvl</span>
      </div>
    </div>

    @if (race.skills.length > 0) {
      <div class="race-card-skills">
        <h4>Racial Skills</h4>
        @for (raceSkill of race.skills; track $index) {
          <div class="skill-item">
            <span class="skill-level">Lvl {{ raceSkill.levelRequired }}</span>
            <div class="skill-info">
              <span class="skill-name">{{ raceSkill.skill.name }}</span>
              <span class="skill-type">({{ raceSkill.skill.type }})</span>
              @if (raceSkill.skill.description) {
                <p class="skill-desc">{{ raceSkill.skill.description }}</p>
              }
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>
