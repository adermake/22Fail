<div class="skill-detail-panel">
  <div class="panel-header">
    <h3>{{ className }}</h3>
    <button class="close-btn" (click)="onClose()">&times;</button>
  </div>

  <div class="panel-content">
    @if (!canLearnFromClass) {
      <div class="locked-notice">
        <span class="lock-icon">ðŸ”’</span>
        <span>{{ getLockedReason() }}</span>
      </div>
    }

    @if (skills.length === 0) {
      <div class="empty-state">
        <p>Keine Skills fÃ¼r diese Klasse definiert.</p>
      </div>
    } @else {
      <div class="skills-list">
        @for (skill of skills; track skill.id) {
          <div
            class="skill-item"
            [class.learned]="isLearned(skill)"
            [class.can-learn]="canLearn(skill)"
            [class.enlightened]="skill.enlightened"
          >
            <div class="skill-header">
              <div class="skill-title">
                <span class="skill-name">{{ skill.name }}</span>
                <span class="skill-type" [class]="getTypeClass(skill.type)">
                  {{ getTypeLabel(skill.type) }}
                </span>
                @if (skill.enlightened) {
                  <span class="enlightened-badge" title="Verinnerlichter Skill">âœ¨</span>
                }
              </div>

              @if (isLearned(skill)) {
                <div class="learned-actions">
                  <span class="learned-badge">Gelernt</span>
                  <button class="unlearn-btn" (click)="onUnlearn(skill)" title="Verlernen">
                    âœ•
                  </button>
                </div>
              } @else if (canLearn(skill)) {
                <button class="learn-btn" (click)="onLearn(skill)">
                  Lernen (1 Punkt)
                </button>
              } @else {
                <span class="locked-badge">
                  @if (!canLearnFromClass) {
                    Gesperrt
                  } @else if (availablePoints <= 0) {
                    Keine Punkte
                  } @else if (skill.requiresSkill) {
                    Voraussetzung fehlt
                  }
                </span>
              }
            </div>

            <div class="skill-body">
              @if (skill.type === 'stat_bonus' && skill.statBonus) {
                <div class="stat-bonus">
                  {{ getStatBonusDisplay(skill) }}
                </div>
              }

              <p class="skill-description">{{ skill.description }}</p>

              @if (skill.cost && skill.cost.amount > 0) {
                <div class="skill-cost">
                  Kosten: {{ getCostDisplay(skill) }}
                </div>
              }

              @if (skill.requiresSkill) {
                <div class="skill-requirement">
                  BenÃ¶tigt: {{ skill.requiresSkill }}
                </div>
              }
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>
